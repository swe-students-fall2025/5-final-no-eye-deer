<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Pet - Apawtment</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body class="pattern-bg">

    <header class="navbar">
        <div class="nav-group">
            <span class="logo">Apawtment</span>
            <a href="{{ url_for('profile') }}">Profile</a>
        </div>
    </header>

    <div class="add-pet-wrapper">

        <section class="add-pet-card">
            <h2 class="edit-profile-title">Edit Pet Information</h2>

            <form action="{{ url_for('edit_pet', pet_id=pet_id) }}" method="post" enctype="multipart/form-data">
                <div class="profile-picture-section">
                    <img src="{{ pet.photo_url or url_for('static', filename='images/cat.webp') }}"
                         class="edit-avatar" id="pet-preview" alt="pet photo">
                    <input type="file" id="pet-upload" name="photo"
                           accept="image/*" style="display: none;"
                           onchange="previewImage(event, 'pet-preview')">
                    <button type="button" class="upload-btn"
                            onclick="document.getElementById('pet-upload').click()">
                        Browse & Upload Photo
                    </button>
                </div>

                <div class="field-group">
                    <label class="field-label" for="petname">Pet Name *</label>
                    <input class="field-input" id="petname" name="name" type="text"
                           value="{{ pet.name }}" required>
                </div>

                <div class="field-group">
                    <label class="field-label" for="pettype">Pet Type *</label>
                    <select class="field-input" id="pettype" name="pet_type" required>
                        <option value="">Select pet type</option>
                        <option value="cat" {% if pet.pet_type == 'cat' %}selected{% endif %}>Cat</option>
                        <option value="dog" {% if pet.pet_type == 'dog' %}selected{% endif %}>Dog</option>
                        <option value="bird" {% if pet.pet_type == 'bird' %}selected{% endif %}>Bird</option>
                        <option value="rabbit" {% if pet.pet_type == 'rabbit' %}selected{% endif %}>Rabbit</option>
                        <option value="hamster" {% if pet.pet_type == 'hamster' %}selected{% endif %}>Hamster</option>
                        <option value="other" {% if pet.pet_type == 'other' %}selected{% endif %}>Other</option>
                    </select>
                </div>

                <div class="field-group">
                    <label class="field-label" for="age">Age (years) *</label>
                    <input class="field-input" id="age" name="age" type="number"
                           min="0" max="30" value="{{ pet.age }}" required>
                </div>

                <div class="field-group">
                    <label class="field-label" for="weight">Weight (lb)</label>
                    <input class="field-input" id="weight" name="weight" type="number"
                           min="0" step="0.1" value="{{ pet.weight }}">
                </div>

                <div class="field-group">
                    <label class="field-label" for="breed">Breed</label>
                    <input class="field-input" id="breed" name="breed" type="text"
                           value="{{ pet.breed or '' }}" placeholder="Enter breed (optional)">
                </div>

                <div class="field-group">
                    <label class="field-label">Personality Tags</label>
                    <div class="tag-selection">
                        <label class="tag-checkbox">
                            <input type="checkbox" name="tags" value="smart"
                                   {% if pet.tags and 'smart' in pet.tags %}checked{% endif %}>
                            Smart
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="tags" value="shy"
                                   {% if pet.tags and 'shy' in pet.tags %}checked{% endif %}>
                            Shy
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="tags" value="foodie"
                                   {% if pet.tags and 'foodie' in pet.tags %}checked{% endif %}>
                            Foodie
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="tags" value="playful"
                                   {% if pet.tags and 'playful' in pet.tags %}checked{% endif %}>
                            Playful
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="tags" value="friendly"
                                   {% if pet.tags and 'friendly' in pet.tags %}checked{% endif %}>
                            Friendly
                        </label>
                    </div>
                </div>

                <div class="edit-profile-actions">
                    <button type="submit" class="profile-btn">Save Changes</button>
                    <button type="button" class="profile-btn secondary"
                            onclick="window.location.href='{{ url_for('profile') }}'">
                        Cancel
                    </button>
                </div>
            </form>
        </section>

    </div>

    <script>
        function previewImage(event, previewId) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    document.getElementById(previewId).src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }
    </script>

</body>

</html>
